<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Penjualan</title>

  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 25px;
      color: #333;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
      text-align: center;
    }

    .card h2 {
      font-size: 14px;
      color: #666;
      margin-bottom: 8px;
    }

    .card .value {
      font-size: 26px;
      font-weight: bold;
      color: #333;
    }

    .table-card {
      background: white;
      padding: 18px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      padding: 12px;
      border-bottom: 1px solid #eee;
      font-size: 14px;
      text-align: left;
    }

    th {
      background: #f9f9f9;
      font-weight: bold;
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      color: #777;
      font-size: 13px;
    }

    a.button {
      display: block;
      text-align: center;
      padding: 14px;
      margin-top: 25px;
      background: #4a90e2;
      color: white;
      text-decoration: none;
      border-radius: 12px;
      font-size: 16px;
    }
  </style>

</head>
<body>

  <h1>Dashboard Penjualan</h1>

  <!-- SUMMARY CARDS -->
  <div class="grid">
    <div class="card">
      <h2>Total Penjualan</h2>
      <div class="value" id="total_penjualan">Rp 0</div>
    </div>

    <div class="card">
      <h2>Total Transaksi</h2>
      <div class="value" id="total_transaksi">0</div>
    </div>

    <div class="card">
      <h2>Rata-rata Transaksi</h2>
      <div class="value" id="rata_transaksi">Rp 0</div>
    </div>

    <div class="card">
      <h2>Produk Terlaris</h2>
      <div class="value" id="produk_terlaris">-</div>
    </div>
  </div>

  <!-- TABLE -->
  <div class="table-card">
    <h2>Riwayat Transaksi</h2>

    <table>
      <thead>
        <tr>
          <th>Tanggal</th>
          <th>Produk</th>
          <th>Jumlah</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody id="tabel_data">
        <tr>
          <td colspan="4" style="text-align:center; color:#aaa;">Belum ada data</td>
        </tr>
      </tbody>
    </table>
  </div>

  <a href="index.html" class="button">⬅ Kembali ke Input</a>

  <div class="footer">
    © 2025 App Penjualan — Dashboard
  </div>

  <script>
    // DATA MASIH STATIC — NANTI BISA KITA HUBUNGKAN KE GOOGLE SHEET
    const dataContoh = [
      { tanggal: "2025-11-01", produk: "Kopi Hitam", jumlah: 3, total: 15000 * 3 },
      { tanggal: "2025-11-02", produk: "Teh Manis", jumlah: 2, total: 10000 * 2 },
      { tanggal: "2025-11-03", produk: "Gorengan", jumlah: 10, total: 2000 * 10 },
    ];

    // Tampilkan tabel
    let tbody = document.getElementById("tabel_data");
    tbody.innerHTML = "";

    let totalPenjualan = 0;
    let totalTransaksi = dataContoh.length;
    let produkCount = {};

    dataContoh.forEach((item) => {
      totalPenjualan += item.total;

      // hitung produk terlaris
      produkCount[item.produk] = (produkCount[item.produk] || 0) + item.jumlah;

      tbody.innerHTML += `
        <tr>
          <td>${item.tanggal}</td>
          <td>${item.produk}</td>
          <td>${item.jumlah}</td>
          <td>Rp ${item.total.toLocaleString()}</td>
        </tr>
      `;
    });

    document.getElementById("total_penjualan").innerText = 
      "Rp " + totalPenjualan.toLocaleString();

    document.getElementById("total_transaksi").innerText = totalTransaksi;

    document.getElementById("rata_transaksi").innerText =
      "Rp " + (totalPenjualan / totalTransaksi).toLocaleString();

    const produkTerlaris = Object.entries(produkCount)
      .sort((a, b) => b[1] - a[1])[0]?.[0] || "-";

    document.getElementById("produk_terlaris").innerText = produkTerlaris;
  </script>

</body>
</html>
