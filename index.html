<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rekap Penjualan ‚Ä¢ Dashboard</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f1724" />

  <!-- Inline CSS (professional styles) -->
  <style>
    :root{
      --accent:#2563eb; --muted:#94a3b8;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,#f5f7fb 0%, #eef2f7 100%);
      color:#0b1220;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .app{display:flex;min-height:100vh;max-width:1100px;margin:0 auto}
    .sidebar{
      width:260px;padding:18px 16px;background:#fff;border-right:1px solid #eef2f6;display:flex;flex-direction:column;gap:18px;
      transition:width .22s ease;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .brand-text .title{font-weight:700}
    .brand-text .subtitle{font-size:12px;color:var(--muted)}
    .nav{display:flex;flex-direction:column;gap:6px}
    .nav-item{background:transparent;border:0;padding:10px 12px;text-align:left;border-radius:10px;cursor:pointer;font-weight:600;color:#1f2937}
    .nav-item.active, .nav-item:hover{background:#f1f6ff;color:var(--accent)}
    .sidebar-foot{margin-top:auto;display:flex;align-items:center;justify-content:space-between}
    .main{flex:1;padding:18px;}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;gap:12px}
    .search-wrap{display:flex;align-items:center;gap:8px;background:#fff;padding:8px;border-radius:10px;box-shadow:0 4px 12px rgba(16,24,40,0.04)}
    .search-wrap input{border:none;outline:none;padding:8px;width:320px}
    .icon-btn{border:0;background:transparent;padding:8px;border-radius:8px;cursor:pointer}
    .badge{background:#ef4444;color:white;padding:2px 6px;border-radius:999px;font-size:12px}
    .page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
    .page-header h1{margin:0;font-size:20px}
    .page-actions{display:flex;gap:8px}
    .grid-cards{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:18px}
    .card{background:white;border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(16,24,40,0.04)}
    .stat-title{color:var(--muted);font-size:13px}
    .stat-value{font-weight:800;font-size:18px;margin-top:8px}
    .stat-sub{font-size:12px;color:var(--muted);margin-top:6px}
    .charts{display:flex;gap:14px}
    .chart-card{flex:1;display:flex;flex-direction:column}
    .chart-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    .form-card .form-row{margin-bottom:10px}
    .form-row label{display:block;color:var(--muted);font-size:13px;margin-bottom:6px}
    .form-row input{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef8;background:transparent}
    .two{display:flex;gap:10px}
    .actions{display:flex;gap:8px;justify-content:flex-end}
    .table-wrap{overflow:auto}
    table{width:100%;border-collapse:collapse}
    th,td{padding:12px;text-align:left;border-bottom:1px solid #f1f5f9;font-size:14px}
    thead th{background:transparent;color:#374151;font-weight:700}
    .table-footer{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
    .product-list{margin-top:12px;list-style:none;padding:0;display:flex;flex-direction:column;gap:8px}
    .product-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;border:1px solid #eef2f6}
    .muted{color:var(--muted);font-size:13px;}
    .btn{padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
    .btn.primary{background:var(--accent);color:white}
    .btn.ghost{background:transparent;border:1px solid #e6eef8}
    .icon-btn.small{padding:6px}
    .hidden{display:none}
    @media (max-width:880px){
      .sidebar{display:none}
      .app{flex-direction:column}
      .charts{flex-direction:column}
      .grid-cards{grid-template-columns:repeat(2,1fr)}
      .search-wrap input{width:160px}
    }
    /* Toast */
    .toast-root{position:fixed;right:18px;bottom:18px;z-index:9999}
    .toast{background:#111;color:white;padding:10px 14px;border-radius:10px;margin-top:8px;opacity:0;transform:translateY(6px);transition:all .28s}
    .toast.visible{opacity:1;transform:none}
  </style>
</head>
<body>
  <div id="app" class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="logo">RP</div>
        <div class="brand-text">
          <div class="title">RekapPenjualan</div>
          <div class="subtitle">Personal SaaS</div>
        </div>
      </div>

      <nav class="nav">
        <button class="nav-item active" data-view="overview">üè† Overview</button>
        <button class="nav-item" data-view="input">‚ûï Input</button>
        <button class="nav-item" data-view="history">üìú Riwayat</button>
        <button class="nav-item" data-view="products">üì¶ Produk</button>
        <button class="nav-item" data-view="reports">üìä Laporan</button>
        <button class="nav-item" data-view="settings">‚öôÔ∏è Pengaturan</button>
      </nav>

      <div class="sidebar-foot">
        <div class="user">
          <div class="avatar">FA</div>
          <div>
            <div class="name">Fajar</div>
            <div class="role">Owner</div>
          </div>
        </div>
        <button id="collapseBtn" class="collapse">‚§∫</button>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <!-- TOPBAR -->
      <header class="topbar">
        <div class="search-wrap">
          <input id="globalSearch" type="search" placeholder="Cari produk, transaksi..." />
          <button id="searchClear" class="icon-btn">‚úñ</button>
        </div>

        <div class="top-actions">
          <button id="darkToggle" class="icon-btn" title="Toggle theme">üåô</button>
          <button id="notifBtn" class="icon-btn" title="Notifications">üîî <span id="notifBadge" class="badge hidden">0</span></button>
        </div>
      </header>

      <!-- VIEWS -->
      <section class="view" id="view-overview" data-view="overview">
        <div class="page-header">
          <h1>Overview</h1>
          <div class="page-actions">
            <button id="exportCsvBtn" class="btn ghost">Export CSV</button>
            <button id="quickAddBtn" class="btn primary">Quick Add</button>
          </div>
        </div>

        <div class="grid-cards">
          <div class="stat card">
            <div class="stat-title">Total Pendapatan</div>
            <div class="stat-value" id="stat-total">Rp 0</div>
            <div class="stat-sub" id="stat-change">‚Äî</div>
          </div>

          <div class="stat card">
            <div class="stat-title">Transaksi</div>
            <div class="stat-value" id="stat-count">0</div>
            <div class="stat-sub">Total record</div>
          </div>

          <div class="stat card">
            <div class="stat-title">Rata-rata</div>
            <div class="stat-value" id="stat-avg">Rp 0</div>
            <div class="stat-sub">Per transaksi</div>
          </div>

          <div class="stat card">
            <div class="stat-title">Produk Terlaris</div>
            <div class="stat-value" id="stat-top">-</div>
            <div class="stat-sub">Berdasarkan qty</div>
          </div>
        </div>

        <div class="charts">
          <div class="chart-card card">
            <div class="chart-header"><h3>Penjualan Bulanan</h3></div>
            <canvas id="salesChart" height="120"></canvas>
          </div>

          <div class="chart-card card">
            <div class="chart-header"><h3>Top Produk</h3></div>
            <canvas id="topChart" height="120"></canvas>
          </div>
        </div>
      </section>

      <!-- INPUT VIEW -->
      <section class="view hidden" id="view-input" data-view="input">
        <div class="page-header">
          <h1>Input Penjualan</h1>
        </div>

        <div class="card form-card">
          <form id="salesForm">
            <div class="form-row">
              <label>Produk</label>
              <input id="fProduct" placeholder="Nama produk" required />
            </div>
            <div class="form-row two">
              <div>
                <label>Qty</label>
                <input id="fQty" type="number" min="1" value="1" required />
              </div>
              <div>
                <label>Harga Satuan (Rp)</label>
                <input id="fPrice" type="number" min="0" value="0" required />
              </div>
            </div>

            <div class="form-row">
              <label>Tanggal</label>
              <input id="fDate" type="date" />
            </div>

            <div class="form-row actions">
              <button type="submit" class="btn primary">Simpan</button>
              <button type="button" id="clearForm" class="btn ghost">Reset</button>
            </div>
          </form>
        </div>
      </section>

      <!-- HISTORY VIEW -->
      <section class="view hidden" id="view-history" data-view="history">
        <div class="page-header">
          <h1>Riwayat Transaksi</h1>
          <div class="page-actions">
            <input id="filterDate" type="month" />
            <select id="filterProduct"><option value="">Semua Produk</option></select>
          </div>
        </div>

        <div class="card">
          <div class="table-wrap">
            <table id="table">
              <thead>
                <tr>
                  <th data-sort="date">Tanggal ‚ñ¥‚ñæ</th>
                  <th data-sort="product">Produk ‚ñ¥‚ñæ</th>
                  <th data-sort="qty">Qty ‚ñ¥‚ñæ</th>
                  <th data-sort="price">Harga</th>
                  <th data-sort="total">Total ‚ñ¥‚ñæ</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody id="tableBody"></tbody>
            </table>
          </div>

          <div class="table-footer">
            <div class="pagination">
              <button id="prevPage" class="icon-btn">‚óÄ</button>
              <span id="pageInfo">1 / 1</span>
              <button id="nextPage" class="icon-btn">‚ñ∂</button>
            </div>

            <div class="rows-per-page">
              <label>Rows</label>
              <select id="rowsPerPage"><option>10</option><option>25</option><option>50</option></select>
            </div>
          </div>
        </div>
      </section>

      <!-- PRODUCTS VIEW -->
      <section class="view hidden" id="view-products" data-view="products">
        <div class="page-header"><h1>Produk</h1></div>

        <div class="card">
          <div class="flex-between">
            <div>
              <h3>Daftar Produk</h3>
              <p class="muted">Kelola daftar produk anda</p>
            </div>
            <div>
              <input id="newProduct" placeholder="Nama produk baru" />
              <button id="addProduct" class="btn primary">Tambah Produk</button>
            </div>
          </div>

          <ul id="productList" class="product-list"></ul>
        </div>
      </section>

      <!-- REPORTS VIEW -->
      <section class="view hidden" id="view-reports" data-view="reports">
        <div class="page-header"><h1>Laporan</h1></div>

        <div class="card">
          <h3>Laporan Ringkasan</h3>
          <pre id="reportPre" class="muted">Report will be generated here</pre>
          <button id="generateReport" class="btn primary">Generate Laporan</button>
        </div>
      </section>

      <!-- SETTINGS VIEW -->
      <section class="view hidden" id="view-settings" data-view="settings">
        <div class="page-header"><h1>Pengaturan</h1></div>

        <div class="card">
          <label>Theme</label>
          <select id="themeSelect">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
          </select>

          <label style="margin-top:12px">Auto Backup (local)</label>
          <button id="backupBtn" class="btn ghost">Backup Sekarang</button>
        </div>
      </section>
    </main>
  </div>

  <!-- MODALS & TOAST -->
  <div id="modalRoot"></div>
  <div id="toastRoot" class="toast-root"></div>

  <!-- App script -->
  <script src="app.js" defer></script>
</body>
</html>
